{
  "$schema": "https://code.claude.com/schemas/hooks.json",
  "hooks": {
    "PostToolUse": [
      {
        "matcher": "Edit|Write|MultiEdit",
        "hooks": [
          {
            "type": "command",
            "command": "node -e \"const input = require('fs').readFileSync('/dev/stdin', 'utf8'); const data = JSON.parse(input); const content = data.tool_output || ''; const tokens = Math.ceil(content.length / 4); if (tokens > 750) { console.error('⚠️ MDAP Red Flag: Response too long (' + tokens + ' tokens). Consider breaking into smaller steps.'); process.exit(1); }\""
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "node -e \"const input = require('fs').readFileSync('/dev/stdin', 'utf8'); const data = JSON.parse(input); const cmd = data.tool_input?.command || ''; if (cmd.includes('&&') && cmd.split('&&').length > 3) { console.error('⚠️ MDAP Red Flag: Command chain too long. Decompose into separate steps.'); process.exit(1); }\""
          }
        ]
      }
    ]
  }
}
