/* Import distinctive fonts - must be first */
@import url('https://fonts.googleapis.com/css2?family=Syne:wght@400;500;600;700;800&family=Inter:wght@300;400;500;600&family=JetBrains+Mono:wght@400;500;600&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    scroll-behavior: smooth;
  }

  body {
    @apply bg-void text-steel-100 antialiased font-body;
    background-image:
      linear-gradient(rgba(251, 191, 36, 0.02) 1px, transparent 1px),
      linear-gradient(90deg, rgba(251, 191, 36, 0.02) 1px, transparent 1px);
    background-size: 40px 40px;
  }

  ::selection {
    @apply bg-amber-glow/30 text-amber-glow;
  }

  /* Custom scrollbar */
  ::-webkit-scrollbar {
    width: 6px;
  }
  ::-webkit-scrollbar-track {
    @apply bg-void-deep;
  }
  ::-webkit-scrollbar-thumb {
    @apply bg-steel-700 rounded-full;
  }
  ::-webkit-scrollbar-thumb:hover {
    @apply bg-amber-dim;
  }
}

@layer components {
  /* ===== Navigation ===== */
  .nav-link {
    @apply relative text-steel-400 font-mono text-sm uppercase tracking-widest
           transition-all duration-300 hover:text-amber-glow;
  }
  .nav-link::after {
    content: '';
    @apply absolute -bottom-1 left-0 w-0 h-px bg-amber-glow
           transition-all duration-300;
  }
  .nav-link:hover::after {
    @apply w-full;
  }

  /* ===== Buttons ===== */
  .btn-primary {
    @apply relative px-8 py-4 bg-amber-glow text-void font-mono font-bold text-sm uppercase tracking-wider
           border border-amber-glow rounded-none
           transition-all duration-300
           hover:bg-transparent hover:text-amber-glow hover:shadow-glow-amber
           active:scale-95;
  }
  .btn-primary::before {
    content: '';
    @apply absolute inset-0 bg-amber-glow/20 opacity-0 transition-opacity duration-300;
  }
  .btn-primary:hover::before {
    @apply opacity-100;
  }

  .btn-secondary {
    @apply relative px-8 py-4 bg-transparent text-amber-glow font-mono font-bold text-sm uppercase tracking-wider
           border border-amber-glow/50 rounded-none
           transition-all duration-300
           hover:border-amber-glow hover:bg-amber-glow/10 hover:shadow-glow-amber-sm;
  }

  .btn-ghost {
    @apply px-4 py-2 text-steel-400 font-mono text-xs uppercase tracking-widest
           border border-steel-700 rounded-none
           transition-all duration-300
           hover:text-amber-glow hover:border-amber-glow/50;
  }

  /* ===== Cards & Panels ===== */
  .panel {
    @apply relative bg-void-surface/80 backdrop-blur-xl
           border border-steel-800 rounded-none
           overflow-hidden;
  }
  .panel::before {
    content: '';
    @apply absolute inset-0 bg-gradient-to-b from-steel-800/20 to-transparent
           pointer-events-none;
  }

  .panel-glow {
    @apply panel border-amber-dim/30 shadow-inner-glow;
  }

  .card {
    @apply relative bg-void-surface/60 backdrop-blur-sm
           border border-steel-800/50 p-6
           transition-all duration-500
           hover:border-amber-glow/30 hover:bg-void-surface/80;
  }
  .card::after {
    content: '';
    @apply absolute top-0 left-0 w-full h-px
           bg-gradient-to-r from-transparent via-amber-glow/20 to-transparent
           opacity-0 transition-opacity duration-500;
  }
  .card:hover::after {
    @apply opacity-100;
  }

  /* Corner accents for panels */
  .corner-accents::before,
  .corner-accents::after {
    content: '';
    @apply absolute w-4 h-4 border-amber-glow/40;
  }
  .corner-accents::before {
    @apply top-0 left-0 border-t border-l;
  }
  .corner-accents::after {
    @apply bottom-0 right-0 border-b border-r;
  }

  /* ===== Typography ===== */
  .display-text {
    @apply font-display font-extrabold tracking-tight leading-none;
  }

  .gradient-text {
    @apply bg-gradient-to-r from-amber-glow via-amber-bright to-amber-muted
           bg-clip-text text-transparent;
  }

  .gradient-text-cyan {
    @apply bg-gradient-to-r from-cyan-data to-cyan-bright
           bg-clip-text text-transparent;
  }

  .section-label {
    @apply font-mono text-xs uppercase tracking-[0.2em] text-amber-glow/80
           flex items-center gap-3;
  }
  .section-label::before {
    content: '';
    @apply w-8 h-px bg-amber-glow/50;
  }

  .section-title {
    @apply font-display font-bold text-4xl text-steel-50 tracking-tight;
  }

  .section-subtitle {
    @apply text-lg text-steel-400 max-w-2xl leading-relaxed;
  }

  @media (min-width: 768px) {
    .section-title {
      font-size: 3rem; /* text-5xl */
    }
    .section-subtitle {
      font-size: 1.25rem; /* text-xl */
    }
  }

  @media (min-width: 1024px) {
    .section-title {
      font-size: 3.75rem; /* text-6xl */
    }
  }

  /* Stats number styling */
  .stat-number {
    @apply font-display font-extrabold tracking-tight;
  }

  /* ===== Code Blocks ===== */
  .code-block {
    @apply relative bg-void-deep border border-steel-800/50 p-6
           font-mono text-sm overflow-x-auto;
  }
  .code-block::before {
    content: '';
    @apply absolute top-0 left-0 w-1 h-full bg-amber-glow/50;
  }

  .code-block .keyword { @apply text-amber-glow; }
  .code-block .string { @apply text-signal-success; }
  .code-block .function { @apply text-cyan-data; }
  .code-block .comment { @apply text-steel-500 italic; }
  .code-block .number { @apply text-amber-bright; }

  /* Terminal styling */
  .terminal {
    @apply relative bg-void-deep border border-steel-800 rounded-none overflow-hidden;
  }
  .terminal-header {
    @apply flex items-center gap-2 px-4 py-3 bg-steel-900 border-b border-steel-800;
  }
  .terminal-dot {
    @apply w-3 h-3 rounded-full;
  }
  .terminal-body {
    @apply p-6 font-mono text-sm;
  }

  /* ===== Stats ===== */
  .stat-value {
    @apply font-display font-extrabold text-4xl tabular-nums tracking-tight leading-none;
  }

  @media (min-width: 768px) {
    .stat-value {
      font-size: 3rem; /* text-5xl */
    }
  }
  .stat-value.gradient-text {
    @apply bg-gradient-to-r from-amber-glow via-amber-bright to-amber-muted
           bg-clip-text text-transparent;
  }
  .stat-label {
    @apply font-mono text-xs uppercase tracking-widest text-steel-400 mt-3;
  }

  /* ===== Grid overlay effect ===== */
  .grid-overlay {
    @apply absolute inset-0 pointer-events-none;
    background-image:
      linear-gradient(rgba(251, 191, 36, 0.03) 1px, transparent 1px),
      linear-gradient(90deg, rgba(251, 191, 36, 0.03) 1px, transparent 1px);
    background-size: 40px 40px;
  }

  /* ===== Scanline effect ===== */
  .scanline-overlay::after {
    content: '';
    @apply absolute inset-0 pointer-events-none opacity-30;
    background: repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      rgba(0, 0, 0, 0.1) 2px,
      rgba(0, 0, 0, 0.1) 4px
    );
  }

  /* ===== Glow effects ===== */
  .glow-dot {
    @apply w-2 h-2 rounded-full bg-amber-glow shadow-glow-amber animate-glow-pulse;
  }

  .glow-dot-success {
    @apply w-2 h-2 rounded-full bg-signal-success shadow-glow-success animate-glow-pulse;
  }

  .glow-line {
    @apply h-px bg-gradient-to-r from-transparent via-amber-glow/50 to-transparent;
  }

  /* ===== Progress & Indicators ===== */
  .progress-bar {
    @apply h-1 bg-steel-800 overflow-hidden;
  }
  .progress-fill {
    @apply h-full bg-gradient-to-r from-amber-glow to-cyan-data transition-all duration-700;
  }

  /* ===== Vote card styling ===== */
  .vote-card {
    @apply bg-void-surface border border-steel-700 p-4 transition-all duration-300;
  }
  .vote-card.pending {
    @apply border-steel-800 opacity-40;
  }
  .vote-card.loading {
    @apply border-cyan-data/50 animate-pulse;
  }
  .vote-card.complete {
    @apply border-steel-600 opacity-100;
  }
  .vote-card.winner {
    @apply border-signal-success bg-signal-success/5 shadow-glow-success;
  }
  .vote-card.loser {
    @apply border-steel-800 opacity-30 scale-95;
  }

  /* ===== Ticket styling ===== */
  .ticket {
    @apply bg-steel-50 text-steel-900 p-6 shadow-panel max-w-md;
  }
  .ticket-header {
    @apply flex items-center gap-3 mb-4 pb-4 border-b border-steel-200;
  }
  .ticket-badge {
    @apply px-3 py-1 text-xs font-mono uppercase tracking-wider rounded-none;
  }
  .ticket-badge.billing { @apply bg-blue-100 text-blue-800 border border-blue-200; }
  .ticket-badge.technical { @apply bg-purple-100 text-purple-800 border border-purple-200; }
  .ticket-badge.shipping { @apply bg-orange-100 text-orange-800 border border-orange-200; }
  .ticket-badge.account { @apply bg-green-100 text-green-800 border border-green-200; }

  /* ===== Spinner ===== */
  .spinner {
    @apply w-5 h-5 border-2 border-cyan-data border-t-transparent rounded-full animate-spin;
  }

  /* ===== Data visualization ===== */
  .data-point {
    @apply w-1.5 h-1.5 rounded-full bg-amber-glow/60;
  }

  .convergence-ring {
    @apply absolute rounded-full border border-amber-glow/20 animate-converge;
  }

  /* ===== Noise texture ===== */
  .noise-overlay {
    @apply fixed inset-0 pointer-events-none opacity-[0.015] z-50;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
  }

  /* ===== Animated underline ===== */
  .animated-underline {
    @apply relative;
  }
  .animated-underline::after {
    content: '';
    @apply absolute bottom-0 left-0 w-0 h-0.5 bg-amber-glow transition-all duration-500;
  }
  .animated-underline:hover::after {
    @apply w-full;
  }

  /* ===== Feature icons ===== */
  .feature-icon {
    @apply w-12 h-12 flex items-center justify-center
           border border-amber-glow/30 text-amber-glow
           transition-all duration-300;
  }
  .card:hover .feature-icon {
    @apply bg-amber-glow/10 border-amber-glow/50;
  }

  /* ===== Form Components ===== */
  .form-group {
    @apply relative;
  }

  .form-label {
    @apply block font-mono text-xs uppercase tracking-widest text-steel-400 mb-2
           transition-colors duration-200;
  }

  .form-group:focus-within .form-label {
    @apply text-amber-glow;
  }

  .form-input {
    @apply w-full px-4 py-3.5 bg-void-deep border border-steel-700 text-steel-100
           font-body text-base leading-relaxed
           transition-all duration-200
           placeholder-steel-600;
  }

  .form-input:hover {
    @apply border-steel-600;
  }

  .form-input:focus {
    @apply border-amber-glow outline-none ring-2 ring-amber-glow/20 bg-void-surface/50;
  }

  .form-input:valid:not(:placeholder-shown) {
    @apply border-signal-success/50;
  }

  .form-input.error,
  .form-input.form-input-error,
  .form-select.form-input-error {
    @apply border-signal-error ring-2 ring-signal-error/20;
  }

  /* Select dropdown styling */
  .form-select {
    @apply form-input appearance-none cursor-pointer
           bg-no-repeat;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%236b7280'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'/%3E%3C/svg%3E");
    background-position: right 1rem center;
    background-size: 1.25rem;
    padding-right: 3rem;
  }

  .form-select:focus {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%23fbbf24'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'/%3E%3C/svg%3E");
  }

  .form-select option {
    @apply bg-void-deep text-steel-100 py-2;
  }

  /* Form helper text */
  .form-helper {
    @apply text-xs text-steel-500 mt-1.5 font-mono;
  }

  .form-error {
    @apply text-xs text-signal-error mt-1.5 font-mono flex items-center gap-1;
  }

  /* Form button states */
  .form-submit {
    @apply btn-primary w-full relative overflow-hidden;
  }

  .form-submit:disabled {
    @apply opacity-50 cursor-not-allowed;
  }

  .form-submit.loading {
    @apply text-transparent;
  }

  .form-submit.loading::after {
    content: '';
    @apply absolute inset-0 flex items-center justify-center;
    background: inherit;
  }

  .form-submit .spinner-overlay {
    @apply absolute inset-0 flex items-center justify-center opacity-0 transition-opacity;
  }

  .form-submit.loading .spinner-overlay {
    @apply opacity-100;
  }

  /* Success state */
  .form-success {
    @apply panel p-8 text-center;
  }

  .form-success-icon {
    @apply w-16 h-16 mx-auto mb-4 flex items-center justify-center
           border-2 border-signal-success text-signal-success rounded-full;
  }

  /* Input icons */
  .input-with-icon {
    @apply relative;
  }

  .input-with-icon .form-input {
    @apply pl-12;
  }

  .input-icon {
    @apply absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-steel-500
           transition-colors duration-200 pointer-events-none;
  }

  .input-with-icon:focus-within .input-icon {
    @apply text-amber-glow;
  }

  /* Floating label variant */
  .form-floating {
    @apply relative;
  }

  .form-floating .form-input {
    @apply pt-6 pb-2;
  }

  .form-floating .form-label {
    @apply absolute left-4 top-1/2 -translate-y-1/2 mb-0
           transition-all duration-200 pointer-events-none;
  }

  .form-floating .form-input:focus ~ .form-label,
  .form-floating .form-input:not(:placeholder-shown) ~ .form-label {
    @apply top-3 text-2xs;
  }
}

/* ===== Animation delays ===== */
.delay-100 { animation-delay: 100ms; }
.delay-200 { animation-delay: 200ms; }
.delay-300 { animation-delay: 300ms; }
.delay-400 { animation-delay: 400ms; }
.delay-500 { animation-delay: 500ms; }
.delay-600 { animation-delay: 600ms; }
.delay-700 { animation-delay: 700ms; }
.delay-800 { animation-delay: 800ms; }

/* ===== Stagger animations ===== */
[data-animate] {
  @apply opacity-0;
}
[data-animate].animate {
  @apply animate-slide-up;
}

/* ===== Particles container ===== */
#particles-container {
  @apply fixed inset-0 pointer-events-none overflow-hidden z-0;
}

.particle {
  @apply absolute w-1 h-1 rounded-full bg-amber-glow/30;
  animation: particleFloat 8s ease-in-out infinite;
}

/* ===== Form Shake Animation ===== */
.animate-shake {
  animation: shake 0.5s ease-in-out;
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  10%, 30%, 50%, 70%, 90% { transform: translateX(-4px); }
  20%, 40%, 60%, 80% { transform: translateX(4px); }
}

/* ===== Convergence Animation ===== */
.convergence-wrapper {
  @apply relative;
}

.convergence-layout {
  @apply grid gap-8 items-start;
  grid-template-columns: 1fr 1.5fr 1fr;
}

@media (max-width: 1024px) {
  .convergence-layout {
    grid-template-columns: 1fr;
    gap: 2rem;
  }
}

/* Stage labels */
.stage-label {
  @apply flex items-center gap-2 mb-4;
}

.stage-number {
  @apply w-6 h-6 flex items-center justify-center
         bg-amber-glow/10 border border-amber-glow/30 text-amber-glow
         font-mono text-xs font-bold;
}

.stage-text {
  @apply font-mono text-xs uppercase tracking-widest text-steel-500;
}

/* Input ticket */
.convergence-input {
  @apply flex flex-col;
}

.ticket-card {
  @apply panel p-5 w-full max-w-sm border-steel-700/50;
}

.ticket-header {
  @apply flex items-center justify-between mb-4 pb-3 border-b border-steel-800/50;
}

.ticket-label {
  @apply font-mono text-xs uppercase tracking-wider text-steel-400;
}

.ticket-id {
  @apply font-mono text-xs text-amber-glow;
}

.ticket-content {
  @apply text-sm text-steel-200 leading-relaxed mb-4;
}

.ticket-footer {
  @apply flex items-center gap-2;
}

.priority-badge {
  @apply inline-flex items-center gap-1.5 px-2 py-1
         font-mono text-2xs uppercase tracking-wider;
}

.priority-badge.priority-high {
  @apply bg-signal-error/10 text-signal-error border border-signal-error/30;
}

.priority-dot {
  @apply w-1.5 h-1.5 rounded-full bg-current animate-pulse;
}

.input-arrow {
  @apply hidden items-center justify-center mt-6;
}

@media (min-width: 1024px) {
  .input-arrow {
    display: flex;
  }
}

.arrow-inner {
  @apply text-steel-600 animate-pulse;
}

.arrow-inner svg {
  @apply w-8 h-8;
}

/* Voting arena */
.convergence-center {
  @apply flex flex-col items-center;
}

.voting-arena {
  @apply relative w-64 h-64;
}

@media (min-width: 768px) {
  .voting-arena {
    width: 18rem; /* w-72 */
    height: 18rem; /* h-72 */
  }
}

@media (min-width: 1024px) {
  .voting-arena {
    width: 20rem; /* w-80 */
    height: 20rem; /* h-80 */
  }
}

/* Orbit rings */
.orbit-rings {
  @apply absolute inset-0 pointer-events-none;
}

.orbit-ring {
  @apply absolute rounded-full border;
  top: 50%;
  left: 50%;
}

.orbit-ring-1 {
  @apply w-[85%] h-[85%] border-steel-800/30;
  transform: translate(-50%, -50%);
  animation: orbitRotate 30s linear infinite;
}

.orbit-ring-2 {
  @apply w-[65%] h-[65%] border-steel-700/40;
  transform: translate(-50%, -50%);
  animation: orbitRotate 20s linear infinite reverse;
}

.orbit-ring-3 {
  @apply w-[45%] h-[45%] border-amber-glow/20;
  transform: translate(-50%, -50%);
  animation: orbitRotate 15s linear infinite;
}

@keyframes orbitRotate {
  from { transform: translate(-50%, -50%) rotate(0deg); }
  to { transform: translate(-50%, -50%) rotate(360deg); }
}

.arena-center {
  @apply absolute inset-0 flex items-center justify-center;
}

/* Multiple pulse layers */
.arena-pulse {
  @apply absolute rounded-full;
}

.arena-pulse-1 {
  @apply w-28 h-28 bg-amber-glow/5;
  animation: arenaPulse1 3s ease-in-out infinite;
}

.arena-pulse-2 {
  @apply w-20 h-20 bg-amber-glow/10;
  animation: arenaPulse2 2.5s ease-in-out infinite 0.5s;
}

.arena-pulse-3 {
  @apply w-14 h-14 bg-amber-glow/15;
  animation: arenaPulse3 2s ease-in-out infinite 1s;
}

@keyframes arenaPulse1 {
  0%, 100% { transform: scale(1); opacity: 0.3; }
  50% { transform: scale(1.4); opacity: 0.1; }
}

@keyframes arenaPulse2 {
  0%, 100% { transform: scale(1); opacity: 0.4; }
  50% { transform: scale(1.3); opacity: 0.15; }
}

@keyframes arenaPulse3 {
  0%, 100% { transform: scale(1); opacity: 0.5; }
  50% { transform: scale(1.2); opacity: 0.2; }
}

.arena-core {
  @apply relative w-16 h-16 rounded-full bg-void-deep border-2 border-steel-600
         flex items-center justify-center transition-all duration-700 z-10;
}

.arena-core.consensus {
  border-color: var(--winner-color);
  background: color-mix(in srgb, var(--winner-color) 15%, #0a0a0b);
  box-shadow:
    0 0 30px var(--winner-color),
    0 0 60px color-mix(in srgb, var(--winner-color) 40%, transparent),
    inset 0 0 20px color-mix(in srgb, var(--winner-color) 20%, transparent);
  transform: scale(1.1);
}

.arena-label {
  @apply font-display text-2xl font-bold text-steel-500 transition-all duration-500;
}

.arena-core.consensus .arena-label {
  color: var(--winner-color);
}

.consensus-check {
  @apply w-8 h-8;
  color: var(--winner-color);
  animation: checkPop 0.4s ease-out;
}

@keyframes checkPop {
  0% { transform: scale(0); opacity: 0; }
  50% { transform: scale(1.3); }
  100% { transform: scale(1); opacity: 1; }
}

/* Shockwave effect */
.arena-shockwave {
  @apply absolute rounded-full pointer-events-none;
  top: 50%;
  left: 50%;
  width: 60px;
  height: 60px;
  transform: translate(-50%, -50%);
  border: 2px solid var(--winner-color);
  opacity: 0;
}

.arena-shockwave.animate {
  animation: shockwave 0.8s ease-out forwards;
}

@keyframes shockwave {
  0% {
    width: 60px;
    height: 60px;
    opacity: 0.8;
    border-width: 3px;
  }
  100% {
    width: 300px;
    height: 300px;
    opacity: 0;
    border-width: 1px;
  }
}

/* Category targets */
.category-targets {
  @apply absolute inset-0 pointer-events-none;
}

.category-target {
  @apply absolute flex flex-col items-center justify-center
         transition-all duration-500;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) rotate(var(--angle)) translateX(110px) rotate(calc(-1 * var(--angle)));
}

@media (max-width: 768px) {
  .category-target {
    transform: translate(-50%, -50%) rotate(var(--angle)) translateX(85px) rotate(calc(-1 * var(--angle)));
  }
}

.target-inner {
  @apply flex flex-col items-center gap-1;
}

.target-letter {
  @apply w-10 h-10 flex items-center justify-center rounded-full
         border-2 font-mono font-bold text-sm
         transition-all duration-300;
  border-color: var(--color);
  color: var(--color);
  background: color-mix(in srgb, var(--color) 10%, transparent);
}

.target-name {
  @apply font-mono text-2xs uppercase tracking-wider text-steel-500
         transition-opacity duration-300;
}

.category-target.receiving .target-letter {
  transform: scale(1.15);
  box-shadow: 0 0 15px var(--color);
  background: color-mix(in srgb, var(--color) 25%, transparent);
}

.category-target.winner {
  transform: translate(-50%, -50%) rotate(var(--angle)) translateX(110px) rotate(calc(-1 * var(--angle))) scale(1.15);
}

.category-target.winner .target-letter {
  box-shadow: 0 0 25px var(--color);
  background: color-mix(in srgb, var(--color) 30%, transparent);
}

.category-target.winner .target-name {
  @apply text-steel-300;
}

.category-target.dimmed {
  opacity: 0.25;
}

.category-target.dimmed .target-name {
  opacity: 0;
}

/* Vote particles */
.vote-particles-container {
  @apply absolute inset-0 pointer-events-none;
}

.vote-particle {
  @apply absolute;
  top: 50%;
  left: 50%;
  opacity: 0;
}

.particle-inner {
  @apply w-9 h-9 rounded-full flex items-center justify-center
         font-mono text-xs font-bold transition-all duration-300;
  background: color-mix(in srgb, var(--color) 25%, #0a0a0b);
  border: 2px solid var(--color);
  color: var(--color);
  box-shadow: 0 0 10px color-mix(in srgb, var(--color) 40%, transparent);
}

.particle-letter {
  @apply relative z-10;
}

.particle-trail {
  @apply absolute w-2 h-12 rounded-full opacity-0;
  background: linear-gradient(to bottom, var(--color), transparent);
  top: 50%;
  left: 50%;
  transform-origin: center top;
}

.vote-particle.animate {
  animation: voteConverge 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
}

.vote-particle.animate .particle-trail {
  animation: trailFade 0.6s ease-out forwards;
}

@keyframes voteConverge {
  0% {
    opacity: 0;
    transform: translate(-50%, -50%) rotate(var(--start-angle)) translateX(160px) scale(0.3);
  }
  15% {
    opacity: 1;
    transform: translate(-50%, -50%) rotate(var(--start-angle)) translateX(140px) scale(1);
  }
  100% {
    opacity: 0.5;
    transform: translate(-50%, -50%) translateX(0) translateY(0) scale(0.6);
  }
}

@keyframes trailFade {
  0% { opacity: 0.6; }
  100% { opacity: 0; }
}

/* Vote tally */
.vote-tally {
  @apply grid grid-cols-2 gap-3 mt-6 w-full max-w-xs;
}

.tally-item {
  @apply relative flex items-center gap-2 px-3 py-2
         bg-void-deep/80 border border-steel-800/50
         transition-all duration-300 overflow-hidden;
}

.tally-item.pulse {
  @apply border-amber-glow/50;
  background: color-mix(in srgb, var(--color, #fbbf24) 8%, #0a0a0b);
}

.tally-item.winner {
  border-color: var(--color);
}

.tally-item.dimmed {
  @apply opacity-40;
}

.tally-dot {
  @apply w-2 h-2 rounded-full shrink-0;
  background: var(--color);
}

.tally-label {
  @apply font-mono text-2xs uppercase tracking-wider text-steel-400 flex-1;
}

.tally-count {
  @apply font-display text-base font-bold text-steel-100
         min-w-[1.25rem] text-right transition-transform duration-200 z-10;
}

.tally-count.bump {
  transform: scale(1.4);
  color: var(--color, #fbbf24);
}

.tally-bar {
  @apply absolute bottom-0 left-0 h-0.5 transition-all duration-500;
  background: var(--color);
  width: 0%;
}

/* Output section */
.convergence-output {
  @apply flex flex-col;
}

.result-container {
  @apply flex items-center justify-center min-h-[200px];
}

.result-waiting {
  @apply flex flex-col items-center gap-4 text-center;
}

.spinner-container {
  @apply relative w-12 h-12;
}

.result-spinner {
  @apply absolute inset-0 border-2 border-steel-700 border-t-amber-glow rounded-full animate-spin;
}

.waiting-text {
  @apply font-mono text-sm text-steel-400;
}

.waiting-subtext {
  @apply font-mono text-xs text-steel-600;
}

.result-success {
  @apply flex flex-col items-center gap-4 text-center;
  animation: resultReveal 0.6s ease-out forwards;
}

@keyframes resultReveal {
  0% { opacity: 0; transform: translateY(20px) scale(0.95); }
  100% { opacity: 1; transform: translateY(0) scale(1); }
}

.result-badge {
  @apply w-14 h-14 rounded-full flex items-center justify-center;
  background: color-mix(in srgb, var(--color) 20%, transparent);
  border: 2px solid var(--color);
  color: var(--color);
  animation: badgePop 0.5s ease-out 0.2s both;
}

@keyframes badgePop {
  0% { transform: scale(0); }
  60% { transform: scale(1.2); }
  100% { transform: scale(1); }
}

.result-badge svg {
  @apply w-7 h-7;
}

.result-content {
  @apply text-center;
}

.result-label {
  @apply block font-mono text-2xs uppercase tracking-widest text-steel-500 mb-1;
}

.result-value {
  @apply block font-display text-2xl font-bold mb-2;
}

.result-confidence {
  @apply flex items-baseline justify-center gap-1 mb-2;
}

.confidence-value {
  @apply font-display text-lg font-bold text-signal-success;
}

.confidence-label {
  @apply font-mono text-xs text-steel-500;
}

.result-stats {
  @apply flex items-center justify-center gap-2 font-mono text-xs text-steel-500;
}

.stats-divider {
  @apply text-steel-700;
}

/* Status bar */
.convergence-status {
  @apply flex items-center justify-between mt-6 px-4 py-3
         bg-void-deep/50 border border-steel-800/50;
}

.vote-status {
  @apply flex items-center gap-3;
}

.status-icon {
  @apply w-2 h-2 rounded-full;
}

.status-icon.voting {
  @apply bg-amber-glow animate-pulse;
}

.status-icon.success {
  @apply bg-signal-success;
}

.status-text {
  @apply font-mono text-xs text-steel-400;
}

.k-indicator {
  @apply px-3 py-1 font-mono text-xs border transition-all duration-300;
  border-color: var(--leader-color, #6b7280);
  color: var(--leader-color, #6b7280);
}

.k-indicator.consensus-reached {
  background: color-mix(in srgb, var(--leader-color) 15%, transparent);
  animation: kPulse 0.5s ease-out;
}

@keyframes kPulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}

.k-label {
  @apply uppercase tracking-wider;
}

/* Progress bar */
.convergence-progress {
  @apply mt-4 h-1 bg-steel-800/50 overflow-hidden;
}

.progress-bar {
  @apply h-full bg-gradient-to-r from-amber-glow to-amber-bright
         transition-all duration-500 ease-out;
  width: 0%;
}

/* Replay button */
.replay-btn {
  @apply mt-6 mx-auto flex items-center gap-2 px-5 py-2.5
         font-mono text-xs uppercase tracking-wider text-steel-400
         border border-steel-700 bg-void-deep/50
         transition-all duration-300
         hover:text-amber-glow hover:border-amber-glow/50 hover:bg-amber-glow/5;
}

.replay-btn svg {
  @apply w-4 h-4;
}

.replay-btn.hidden {
  @apply opacity-0 pointer-events-none translate-y-2;
}

@keyframes fade-in {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.animate-fade-in {
  animation: fade-in 0.5s ease-out;
}

/* ===== Mobile Menu - Premium Slide-up Experience ===== */
.mobile-menu {
  @apply fixed inset-0 flex flex-col items-center justify-center
         opacity-0 pointer-events-none;
  z-index: 100;
  background: linear-gradient(180deg, rgba(10, 10, 11, 0.98) 0%, rgba(5, 5, 6, 0.99) 100%);
  backdrop-filter: blur(20px) saturate(180%);
  -webkit-backdrop-filter: blur(20px) saturate(180%);
  transform: translateY(100%);
  transition: transform 0.5s cubic-bezier(0.16, 1, 0.3, 1), opacity 0.3s ease;
}

.mobile-menu.active {
  @apply opacity-100 pointer-events-auto;
  transform: translateY(0);
}

.mobile-menu-links {
  @apply flex flex-col items-center gap-6;
}

.mobile-menu a.mobile-menu-link {
  @apply font-display text-3xl font-bold text-steel-300
         transition-all duration-300 hover:text-amber-glow;
  opacity: 0;
  transform: translateY(30px);
  letter-spacing: -0.02em;
}

.mobile-menu.active a.mobile-menu-link {
  opacity: 1;
  transform: translateY(0);
}

/* Staggered animation for menu links */
.mobile-menu.active a.mobile-menu-link:nth-child(1) { transition-delay: 0.1s; }
.mobile-menu.active a.mobile-menu-link:nth-child(2) { transition-delay: 0.15s; }
.mobile-menu.active a.mobile-menu-link:nth-child(3) { transition-delay: 0.2s; }
.mobile-menu.active a.mobile-menu-link:nth-child(4) { transition-delay: 0.25s; }

.mobile-menu .btn-primary {
  opacity: 0;
  transform: translateY(20px);
  transition: all 0.5s cubic-bezier(0.16, 1, 0.3, 1);
  transition-delay: 0s;
}

.mobile-menu.active .btn-primary {
  opacity: 1;
  transform: translateY(0);
  transition-delay: 0.35s;
}

.mobile-menu-close {
  @apply absolute top-6 right-6 w-12 h-12 flex items-center justify-center
         text-steel-400 hover:text-amber-glow transition-all duration-300;
  opacity: 0;
  transform: rotate(-90deg);
}

.mobile-menu.active .mobile-menu-close {
  opacity: 1;
  transform: rotate(0);
  transition-delay: 0.4s;
}

/* Mobile menu decorative elements */
.mobile-menu::before {
  content: '';
  @apply absolute top-0 left-0 right-0 h-px;
  background: linear-gradient(90deg, transparent, rgba(251, 191, 36, 0.3), transparent);
  opacity: 0;
  transition: opacity 0.5s ease 0.3s;
}

.mobile-menu.active::before {
  opacity: 1;
}

/* ===== Mobile Sticky CTA Bar ===== */
.mobile-sticky-cta {
  @apply fixed bottom-0 left-0 right-0 z-50;
  background: linear-gradient(180deg, transparent 0%, rgba(10, 10, 11, 0.95) 30%, rgba(10, 10, 11, 0.99) 100%);
  padding: env(safe-area-inset-bottom, 0) env(safe-area-inset-right, 0) calc(env(safe-area-inset-bottom, 0) + 1rem) env(safe-area-inset-left, 0);
  padding-top: 1.5rem;
  transform: translateY(100%);
  opacity: 0;
  transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
}

.mobile-sticky-cta.visible {
  transform: translateY(0);
  opacity: 1;
}

.mobile-sticky-cta-inner {
  @apply flex gap-3 px-4;
}

.mobile-sticky-cta .btn-primary {
  @apply flex-1 py-3 text-xs;
}

.mobile-sticky-cta .btn-secondary {
  @apply py-3 px-4 text-xs;
}

@media (min-width: 768px) {
  .mobile-sticky-cta {
    display: none;
  }
}

/* ===== Responsive adjustments ===== */

/* Large tablets and below */
@media (max-width: 1024px) {
  .hero-visualization {
    @apply hidden;
  }

  /* Show mobile hero visual */
  .mobile-hero-visual {
    @apply block mt-12;
  }

  /* Convergence animation - simpler layout */
  .convergence-layout {
    gap: 1.5rem;
  }

  /* Pricing cards - horizontal scroll */
  .pricing-scroll-container {
    @apply -mx-6 px-6;
    overflow-x: auto;
    scroll-snap-type: x mandatory;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
  }

  .pricing-scroll-container::-webkit-scrollbar {
    display: none;
  }

  .pricing-scroll-container .grid {
    @apply flex gap-4;
    width: max-content;
  }

  .pricing-scroll-container .card {
    @apply flex-shrink-0;
    width: 280px;
    scroll-snap-align: center;
  }
}

/* Tablets */
@media (max-width: 768px) {
  /* Typography scaling - refined mobile scale */
  .section-title {
    @apply text-2xl leading-tight;
    letter-spacing: -0.02em;
  }
  .section-subtitle {
    @apply text-base leading-relaxed;
  }
  .stat-value {
    @apply text-3xl;
  }
  .stat-label {
    @apply text-2xs;
  }
  .display-text {
    @apply text-3xl leading-tight;
    letter-spacing: -0.02em;
  }

  /* Navigation - glass morphism enhancement */
  nav {
    @apply h-14;
  }
  nav .h-16 {
    @apply h-14;
  }
  .nav-link {
    @apply text-xs;
  }

  /* Buttons - larger touch targets with better feedback */
  .btn-primary,
  .btn-secondary {
    @apply px-6 py-4 text-xs w-full justify-center;
    -webkit-tap-highlight-color: transparent;
  }

  .btn-primary:active {
    @apply bg-amber-bright;
    transform: scale(0.98);
  }

  .btn-ghost {
    @apply px-4 py-3;
  }

  /* Cards & Panels - mobile optimized */
  .panel {
    @apply p-5;
  }
  .card {
    @apply p-5;
  }

  /* Code blocks - scrollable on mobile */
  .code-block {
    @apply p-4 text-xs overflow-x-auto;
    -webkit-overflow-scrolling: touch;
  }

  .code-block pre {
    @apply min-w-max;
  }

  /* Feature icons */
  .feature-icon {
    @apply w-10 h-10;
  }

  /* Stats grid - 2x2 on tablets */
  #stats-section {
    @apply gap-3 grid-cols-2;
  }
  #stats-section > div {
    @apply p-5;
  }
  #stats-section .w-12 {
    @apply w-10 h-10;
  }

  /* Form improvements */
  .form-input,
  .form-select {
    @apply text-base py-4;
    /* Prevent iOS zoom on focus */
    font-size: 16px;
  }

  .form-group {
    @apply mb-5;
  }

  /* Audit form - stack on mobile */
  .panel-glow .grid.md\\:grid-cols-2 {
    @apply gap-8;
  }

  /* Convergence animation adjustments */
  .voting-arena {
    @apply w-56 h-56;
  }

  .ticket-card {
    @apply p-4 max-w-full;
  }

  .result-panel {
    @apply p-4;
  }

  /* Use case cards - better mobile grid */
  #use-cases .grid {
    @apply gap-4;
  }

  /* Section padding adjustment */
  section {
    @apply py-20;
  }

  /* Hero section adjustments */
  .hero-section .space-y-8 {
    @apply space-y-6;
  }

  /* Trust indicators - wrap nicely */
  .hero-section .flex-wrap {
    @apply gap-4;
  }

  /* Problem section math panel */
  .panel .mono-refined {
    @apply text-lg;
  }
}

/* Small phones */
@media (max-width: 480px) {
  /* Extra refined typography for small screens */
  html {
    font-size: 15px;
  }

  .section-title {
    @apply text-xl;
    letter-spacing: -0.01em;
  }
  .display-text {
    @apply text-2xl;
    letter-spacing: -0.01em;
  }
  .stat-value {
    @apply text-2xl;
  }

  .section-label {
    @apply text-2xs;
  }

  /* Full-width buttons */
  .btn-primary,
  .btn-secondary {
    @apply w-full text-center py-4;
  }

  /* Tighter padding for small screens */
  .panel, .card {
    @apply p-4;
  }

  section {
    @apply py-16;
  }

  /* Hero adjustments */
  .hero-section .py-20 {
    @apply py-12;
  }

  /* Stats - 2x2 grid maintained but smaller */
  #stats-section {
    @apply grid-cols-2 gap-2;
  }

  #stats-section > div {
    @apply p-3;
  }

  #stats-section .stat-value {
    @apply text-xl;
  }

  #stats-section .w-12,
  #stats-section .w-10 {
    @apply w-8 h-8;
  }

  /* Convergence animation - compact */
  .voting-arena {
    @apply w-48 h-48;
  }

  .arena-core {
    @apply w-12 h-12;
  }

  .arena-label {
    @apply text-lg;
  }

  .category-target {
    @apply w-12 h-12;
  }

  .category-letter {
    @apply text-sm;
  }

  /* Tally compact */
  .tally-grid {
    @apply gap-2;
  }

  .tally-item {
    @apply p-2;
  }

  .tally-value {
    @apply text-base;
  }

  /* Form compact */
  .panel-glow {
    @apply p-5;
  }

  /* Pricing - full width cards */
  .pricing-scroll-container .card {
    width: 260px;
  }

  /* How it works - step circles smaller */
  .panel-glow .w-20 {
    @apply w-16 h-16;
  }

  .panel-glow .text-2xl {
    @apply text-xl;
  }

  /* Hide some decorative elements for performance */
  .corner-accents::before,
  .corner-accents::after {
    @apply hidden;
  }
  .noise-overlay {
    opacity: 0.3;
  }
  #particles-container {
    @apply hidden;
  }

  /* Orbit rings simplified */
  .orbit-ring-1,
  .orbit-ring-2 {
    animation: none;
  }

  /* Footer compact */
  footer .grid {
    @apply gap-8;
  }
}

/* Extra small phones (iPhone SE, etc) */
@media (max-width: 375px) {
  html {
    font-size: 14px;
  }

  .display-text {
    @apply text-xl;
  }

  .section-title {
    @apply text-lg;
  }

  .btn-primary,
  .btn-secondary {
    @apply py-3 text-2xs;
  }

  .voting-arena {
    @apply w-40 h-40;
  }

  /* Single column stats on very small screens */
  #stats-section {
    @apply grid-cols-1;
  }
}

/* Touch device optimizations */
@media (hover: none) {
  /* Remove hover-dependent animations for better touch experience */
  .nav-link::after {
    @apply hidden;
  }
  .card:hover {
    @apply border-steel-800/50 bg-void-surface/60;
  }
  .btn-primary:hover {
    @apply bg-amber-glow text-void shadow-none;
  }

  /* Active states for touch feedback */
  .card:active {
    @apply border-amber-glow/30 bg-void-surface/80;
    transform: scale(0.99);
  }

  .btn-secondary:active {
    @apply border-amber-glow bg-amber-glow/20;
  }

  /* Ensure minimum touch target size (44px) */
  .btn-ghost,
  .nav-link,
  button,
  a {
    min-height: 44px;
  }

  /* Form elements touch friendly */
  .form-input,
  .form-select {
    min-height: 52px;
  }

  /* Disable text selection on interactive elements */
  .btn-primary,
  .btn-secondary,
  .btn-ghost,
  .card {
    -webkit-user-select: none;
    user-select: none;
  }
}

/* Landscape phones */
@media (max-height: 500px) and (orientation: landscape) {
  .min-h-screen {
    min-height: auto;
  }
  section {
    @apply py-12;
  }

  /* Hide sticky CTA in landscape to save space */
  .mobile-sticky-cta {
    @apply hidden;
  }

  /* Compact hero */
  .hero-section .py-20 {
    @apply py-8;
  }
}

/* Reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }

  .mobile-menu {
    transition: opacity 0.01ms;
    transform: none !important;
  }

  .mobile-menu.active {
    transform: none !important;
  }

  .orbit-ring,
  .arena-pulse,
  .vote-particle {
    animation: none !important;
  }
}

/* Safe area insets for notched devices */
@supports (padding: env(safe-area-inset-bottom)) {
  nav {
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
    padding-top: env(safe-area-inset-top);
  }

  footer {
    padding-bottom: calc(env(safe-area-inset-bottom) + 1rem);
  }

  /* Account for bottom sticky CTA */
  body {
    padding-bottom: env(safe-area-inset-bottom);
  }

  /* Mobile sticky CTA safe area */
  .mobile-sticky-cta {
    padding-bottom: calc(env(safe-area-inset-bottom) + 1rem);
  }
}

/* Dark mode optimizations for OLED screens */
@media (prefers-color-scheme: dark) {
  .panel,
  .card {
    background-color: rgba(10, 10, 11, 0.9);
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .btn-primary {
    @apply border-2;
  }

  .panel,
  .card {
    @apply border-2 border-steel-600;
  }

  .form-input,
  .form-select {
    @apply border-2;
  }
}
